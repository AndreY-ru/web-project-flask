{% extends 'base.html' %}

{% block title %}{{ subject.name }}{% endblock %}

{% block body %}
<main class="container">
  <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞ -->
  <nav class="breadcrumb">
    <a href="{{ url_for('education') }}?semester_id={{ subject.semester_id }}">
      {{ subject.semester_name }}
    </a>
    <span class="separator">/</span>
    <span>{{ subject.name }}</span>
  </nav>
  
  <div class="layout">
    <div class="left-content">
      <!-- –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ -->
      <div class="card">
        <h3 class="card-title card--aligned">
          <svg xmlns="http://www.w3.org/2000/svg" fill="#ffffff" width="18px" height="18px" viewBox="0 0 24 24">
            <path d="M12,1A11,11,0,1,0,23,12,11.013,11.013,0,0,0,12,1Zm0,20a9.641,9.641,0,0,1-5.209-1.674,7,7,0,0,1,10.418,0A9.167,9.167,0,0,1,12,21Zm6.694-3.006a8.98,8.98,0,0,0-13.388,0,9,9,0,1,1,13.388,0ZM12,6a4,4,0,1,0,4,4A4,4,0,0,0,12,6Zm0,6a2,2,0,1,1,2-2A2,2,0,0,1,12,12Z"/>
          </svg>
          –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏
        </h3>
        
        {% for teacher in teachers %}
        <section class="profile">
          <div class="profile-img-container">
            <div class="profile-img">
              {% if teacher.profile_photo %}
                <img src="{{ url_for('static', filename=teacher.profile_photo) }}"
                      alt="–§–æ—Ç–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è"
                      class="profile-photo"
                      onerror="this.onerror=null; this.innerHTML='{{ teacher.first_name|first }}{{ teacher.surname|first }}'">
              {% else %}
                {{ teacher.first_name|first }}{{ teacher.surname|first }}
              {% endif %}
            </div>
          </div>
          
          <div class="profile-info">
            <h2>{{ teacher.surname }} {{ teacher.first_name }} {{ teacher.patronymic or '' }}</h2>
            <p><strong>–î–æ–ª–∂–Ω–æ—Å—Ç—å:</strong> {{ teacher.position }}</p>
            <p><strong>–ö–∞—Ñ–µ–¥—Ä–∞:</strong> {{ teacher.department_name }}</p>
            <p><strong>–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:</strong>
              <a href="mailto:{{ teacher.email }}">{{ teacher.email }}</a>
            </p>
          </div>
        </section>
        {% endfor %}
      </div>
      
      <!-- –¢–∞–±–ª–∏—Ü–∞ –≤–∏–¥–æ–≤ —É—á–µ–±–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ -->
      <section class="card">
        <div class="section-title"><h3>–¢–∞–±–ª–∏—Ü–∞ –≤–∏–¥–æ–≤ —É—á–µ–±–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h3></div>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>–í–∏–¥ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</th>
                <th>–ò—Å—Ç–æ—Ä–∏—è –±–∞–ª–ª–æ–≤</th>
                <th>–ò—Ç–æ–≥</th>
              </tr>
            </thead>
            <tbody>
              {% for activity in activities %}
              <tr>
                <td>{{ activity.name }}</td>
                <td>{{ activity.student_score }} / {{ activity.max_score }}</td>
                <td>{{ activity.student_score }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </section>
      
      <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–∞–±–æ—Ç -->
      <section class="card">
        <div class="section-title"><h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–∞–±–æ—Ç</h3></div>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>–¢–∏–ø —Ä–∞–±–æ—Ç—ã</th>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–†–µ–∑—É–ª—å—Ç–∞—Ç</th>
                <th>–ë–∞–ª–ª—ã / –ú–∞–∫—Å. –±–∞–ª–ª</th>
              </tr>
            </thead>
            <tbody>
              {% for assignment in assignments %}
              <tr>
                <td>–ü–∏—Å—å–º–µ–Ω–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ</td>
                <td>{{ assignment.title }}</td>
                <td>{{ assignment.status or '–ù–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ' }}</td>
                <td>{{ assignment.score or '-' }} / {{ assignment.max_score }}</td>
                <td>{{ assignment.score or '0' }} / {{ assignment.max_score }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </section>
    </div>
    
    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É -->
    <section class="right-content">
      <h3 class="card card-title card--aligned">üìò –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ: {{ subject.name }}</h3>
      <div class="card">
        <div class="section-title"><h3>üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫—É—Ä—Å–∞</h3></div>
        <div class="list-library">
          {% for material in materials|groupby('title') %}
          <div class="section-title">{{ material.grouper }}</div>
          <ul>
            {% for item in material.list %}
            <li>
              <a href="{{ url_for('download', file_id=item.id) if item.file_path else '#' }}">
                {{ item.description or item.title }}
              </a>
            </li>
            {% endfor %}
          </ul>
          {% endfor %}
        </div>
      </div>
    </section>
  </div>
</main>
{% endblock %}